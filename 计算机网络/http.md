### http1.0

> 一次连接一个请求，请求结束后立即断开连接

### http1.1

> 默认长连接（TCP连接默认不关闭，被多个请求复用），通过设置报文头字段`connection:keep-alive`，减少了重复建立TCP连接的开销。
>
> `解决了客户端的队头阻塞`，也是**http1.1里的管道**，不必等待服务端响应就可以发下一个请求。
>
> 不一定能提高性能，因为服务端还是按顺序响应，如果处理第一个请求特别耗费资源，导致后续请求的响应时间变长。



### http2

> 为了解决http1.1的服务端队头阻塞，采用**二进制分帧**和**多路复用**

二进制分帧

>帧是http2数据通信的最小单位，在http1.1中数据包的格式是文本格式，而http2中是二进制格式。
>
>采用帧的传输方式，传输的数据被分割的更小，且二进制能被高效解析。
>
>实现了服务端可以不按顺序响应，`解决了服务端的队头阻塞`

多路复用

> http1.1`并发`多个请求，还是需要多个TCP连接
>
> http2中同域名的通信都在一个连接中完成，仅占用一个TCP连接，并且可以并行请求与响应不干扰。

首部压缩

> 使用 首部表 监听报文头部字段
>
> 比如请求一发送了全部字段，那请求二就只发差异数据，减少冗余数据。

服务端推送

> 允许服务端主动推动资源给客户端，适合加载静态资源

![image-20230325151841814](/Users/xuzhi/Library/Application Support/typora-user-images/image-20230325151841814.png)





### 常见字段

*Host*：客户端请求指定服务器的域名，可发到同一台服务器的指定网站

*Content-Length*：服务器说明本次回应的数据长度

*connection*：客户端请求服务器使用TCP持久连接



Content-Type：服务器设置，指定本次数据格式，与Accept对应

Accept：客户端告知服务端自己希望的数据格式



*Content-Encoding*：服务端告知报文数据的压缩方法，与Accpt-Encoding对应

Accpt-Encoding：客户端告知服务器自己能接受的数据压缩方式



### http

80 

优点

1. 简单：报文头+报文体，键值对形式

2. 容易扩展：http工作于应用层，不限制传输层使用什么协议。

   ​	例：https在http与tcp层之间增加了ssl/tls安全传输层，

   ​		   http3.0将tcp层换成了基于udp的quic（实现类似TCP的可靠传输）。

3. 应用广泛和跨平台：应用在浏览器，app网络传输数据

缺点

1. 

特点

1. 无状态：好在服务器不需要耗费资源去标识不同客户端，坏处是完成连续性操作需要额外配置。简单方法解决：cookie
2. 明文传输：好在方便调试查看信息，坏在数据信息容易被窃取。
3. 不安全：明文（账号泄露）、不验证对方身份（遭遇伪装网站）、不验证报文完整性（容易遭到篡改）；



### https

443

经过tcp三次握手后，进行ssl/tls三次握手，才进入加密传输

解决了http的不安全问题：

1. 加密传输

2. 身份证书

3. 校验机制：被篡改无法正常显示，摘要算法为数据生成独一无二指纹。传输的报文内容：加密后的[指纹+明文]，接收方收到后用相同摘要算法算出明文，比对指纹，相同则报文完整。



